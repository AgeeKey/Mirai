#!/bin/bash
# MIRAI - –ü—Ä–æ—Å—Ç–æ–π –∑–∞–ø—É—Å–∫ –∞–≤—Ç–æ–Ω–æ–º–Ω–æ–≥–æ –∞–≥–µ–Ω—Ç–∞

echo "ü§ñ MIRAI - –ê–≤—Ç–æ–Ω–æ–º–Ω—ã–π AI –ê–≥–µ–Ω—Ç"
echo "================================"

cd /root/mirai/mirai-agent

# –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
if [ -d "venv" ]; then
    source venv/bin/activate
    echo "‚úÖ –í–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–æ"
else
    echo "‚ùå –û—à–∏–±–∫–∞: venv –Ω–µ –Ω–∞–π–¥–µ–Ω"
    exit 1
fi

# –ü—Ä–æ–≤–µ—Ä—è–µ–º .env
if [ ! -f ".env" ]; then
    echo "‚ùå –û—à–∏–±–∫–∞: .env —Ñ–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω"
    exit 1
fi

# –ó–∞–≥—Ä—É–∂–∞–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
export $(cat .env | grep -v '^#' | xargs)

# –ó–∞–ø—É—Å–∫–∞–µ–º –∞–≥–µ–Ω—Ç–∞
echo "üöÄ –ó–∞–ø—É—Å–∫ –∞–≥–µ–Ω—Ç–∞..."
python3 run_mirai.py
