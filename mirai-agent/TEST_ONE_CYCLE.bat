@echo off
chcp 65001 >nul
echo.
echo ╔══════════════════════════════════════════════════════════════════════╗
echo ║  🧪 MIRAI V2 - БЕЗОПАСНЫЙ ТЕСТОВЫЙ РЕЖИМ                            ║
echo ╚══════════════════════════════════════════════════════════════════════╝
echo.
echo  🛡️ ЗАЩИТА:
echo  ═══════════
echo  ✅ Максимум 10 действий за цикл
echo  ✅ Пауза 60 секунд между циклами (вместо 30)
echo  ✅ FAILSAFE включен - курсор в угол экрана = СТОП
echo  ✅ Только 1 цикл для теста
echo.
echo  🔍 ЧТО БУДЕТ:
echo  ═══════════
echo  1. Vision анализ текущей ситуации
echo  2. AI выбор простой задачи
echo  3. Создание плана (макс 7 шагов)
echo  4. Умное выполнение с Vision контролем
echo  5. Анализ результатов
echo  6. ОСТАНОВКА (не бесконечный цикл!)
echo.
echo 🛑 Для экстренной остановки:
echo    - Переместите курсор в ЛЕВЫЙ ВЕРХНИЙ угол экрана
echo    - Или нажмите Ctrl+C в терминале
echo.
pause

cd /d "%~dp0"
call venv\Scripts\activate.bat

echo.
echo 🚀 ЗАПУСК ОДНОГО ТЕСТОВОГО ЦИКЛА...
echo.

python test_one_cycle.py

echo.
echo ✅ ТЕСТОВЫЙ ЦИКЛ ЗАВЕРШЁН!
echo 📁 Проверьте логи: autonomous_desktop_v2.log
echo 📸 Скриншоты: screenshots/
echo.
pause
